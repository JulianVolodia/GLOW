// GLOW.js r1 - http://github.com/empaempa/GLOW
var GLOW=function(){var a={},b={},c=-1;a.currentContext={};a.registerContext=function(c){b[c.id]=c;a.enableContext(c)};a.getContextById=function(c){if(b[c])return b[c];console.error("Couldn't find context id "+c+", returning current with id "+a.currentContext.id);return a.currentContext};a.enableContext=function(b){a.currentContext=typeof b==="string"?getContextById[b]:b;GL=a.GL=a.currentContext.GL};a.uniqueId=function(){return++c};return a}(),GL={};
GLOW.Context=function(a){a===void 0&&(a={});this.id=a.id!==void 0?a.id:GLOW.uniqueId();this.alpha=a.alpha!==void 0?a.alpha:!0;this.depth=a.depth!==void 0?a.depth:!0;this.antialias=a.antialias!==void 0?a.antialias:!0;this.stencil=a.stencil!==void 0?a.stencil:!1;this.premultipliedAlpha=a.premultipliedAlpha!==void 0?a.premultipliedAlpha:!0;this.preserveDrawingBuffer=a.preserveDrawingBuffer!==void 0?a.preserveDrawingBuffer:!1;this.width=a.width!==void 0?a.width:window.innerWidth;this.height=a.height!==
void 0?parmaeters.height:window.innerHeight;try{this.domElement=document.createElement("canvas"),this.GL=this.domElement.getContext("experimental-webgl",{alpha:this.alpha,depth:this.depth,antialias:this.antialias,stencil:this.stencil,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer}),this.domElement.width=this.width,this.domElement.height=this.height,this.GL.viewport(0,0,this.width,this.height)}catch(b){return console.error("GLOW.Context.construct: "+b),
context}GLOW.registerContext(this);this.cache=new GLOW.Cache;this.enableCulling(!1);this.enableDepthTest(!0,{func:GL.LEQUAL,write:!0,zNear:0,zFar:1});this.enableBlend(!1);this.setupClear({clearBits:GL.COLOR_BUFFER_BIT|GL.DEPTH_BUFFER_BIT});this.clear()};
GLOW.Context.prototype.setupClear=function(a){var b=a.depth!==void 0?Math.min(1,Math.max(0,a.depth)):1;GL.clearColor(a.red!==void 0?Math.min(1,Math.max(0,a.red)):0,a.green!==void 0?Math.min(1,Math.max(0,a.green)):0,a.blue!==void 0?Math.min(1,Math.max(0,a.blue)):0,a.alpha!==void 0?Math.min(1,Math.max(0,a.alpha)):1);GL.clearDepth(b);this.clearBits=a.clearBits!==void 0?a.clearBits:this.clearBits;return this};GLOW.Context.prototype.clear=function(a){if(a===void 0)a=this.clearBits;GL.clear(a);return this};
GLOW.Context.prototype.enableBlend=function(a,b){a?(GL.enable(GL.BLEND),b&&this.setupBlend(b)):GL.disable(GL.BLEND);return this};
GLOW.Context.prototype.setupBlend=function(a){if(a.equationRGB)try{a.equationAlpha&&GL.blendEquationSeparate(a.equationRGB,a.equationAlpha),a.srcRGB&&GL.blendFuncSeparate(a.srcRGB,a.dstRGB,a.srcAlpha,a.dstAlpha)}catch(b){console.error("GLOW.Context.setupBlend: "+b)}else try{a.equation&&GL.blendEquation(a.equation),a.src&&GL.blendFunc(a.src,a.dst)}catch(c){console.error("GLOW.Context.setupBlend: "+c)}return this};
GLOW.Context.prototype.enableDepthTest=function(a,b){a?(GL.enable(GL.DEPTH_TEST),b&&this.setupDepthTest(b)):GL.disable(GL.DEPTH_TEST);return this};GLOW.Context.prototype.setupDepthTest=function(a){try{a.func!==void 0&&GL.depthFunc(a.func),a.write!==void 0&&GL.depthMask(a.write),a.zNear!==void 0&&a.zFar!==void 0&&a.zNear<=a.zFar&&GL.depthRange(Math.max(0,Math.min(1,a.zNear)),Math.max(0,Math.min(1,a.zFar)))}catch(b){console.log("GLOW.Context.setupDepthTest: "+b)}return this};
GLOW.Context.prototype.enableStencilTest=function(a,b){a?(GL.enable(GL.STENCIL_TEST),b&&this.setupStencilTest(b)):GL.disable(GL.STENCIL_TEST);return this};GLOW.Context.prototype.setupStencilTest=function(){return this};GLOW.Context.prototype.enableCulling=function(a,b){a?(GL.enable(GL.CULL_FACE),b&&this.setupCulling(b)):GL.disable(GL.CULL_FACE);return this};
GLOW.Context.prototype.setupCulling=function(a){try{a.frontFace&&GL.frontFace(a.frontFace),a.cullFace&&GL.cullFace(a.cullFace)}catch(b){console.error("GLOW.Context.setupCulling: "+b)}return this};GLOW.Context.prototype.enableScissorTest=function(a,b){a?(GL.enable(GL.SCISSOR_TEST),b&&this.setupScissorTest(b)):GL.disable(GL.SCISSOR_TEST);return this};GLOW.Context.prototype.setupScissorTest=function(){return this};GLOW.Context.prototype.setupViewport=function(){return this};
GLOW.Compiler=function(){var a={},b=[];a.compile=function(c,e,d){var g,h=b.length,f;for(g=0;g<h;g++)if(f=b[g],c===f.vertexShaderCode&&e===f.fragmentShaderCode)break;g===h?(g=a.linkProgram(a.compileVertexShader(c),a.compileFragmentShader(e)),b.push({vertexShaderCode:c,fragmentShaderCode:e,program:g})):g=f.program;return new GLOW.CompiledData(g,a.createUniforms(a.extractUniforms(g),d),a.createAttributes(a.extractAttributes(g),d),a.createElements(d.elements))};a.compileVertexShader=function(a){var b;
b=GL.createShader(GL.VERTEX_SHADER);b.id=GLOW.uniqueId();GL.shaderSource(b,a);GL.compileShader(b);GL.getShaderParameter(b,GL.COMPILE_STATUS)||console.error("GLOW.Compiler.compileVertexShader: "+GL.getShaderInfoLog(b));return b};a.compileFragmentShader=function(a){var b;b=GL.createShader(GL.FRAGMENT_SHADER);b.id=GLOW.uniqueId();GL.shaderSource(b,a);GL.compileShader(b);GL.getShaderParameter(b,GL.COMPILE_STATUS)||console.error("GLOW.Compiler.compileFragmentShader: "+GL.getShaderInfoLog(b));return b};
a.linkProgram=function(a,b){var d;d=GL.createProgram();d.id=GLOW.uniqueId();GL.attachShader(d,a);GL.attachShader(d,b);GL.linkProgram(d);GL.getProgramParameter(d,GL.LINK_STATUS)||console.error("GLOW.Compiler.linkProgram: Could not initialise program");return d};a.extractUniforms=function(a){for(var b={},d,g=0;;){d=GL.getActiveUniform(a,g);if(d!==null&&d!==-1&&d!==void 0)d.name=d.name.split("[")[0],d.location=GL.getUniformLocation(a,d.name),d.locationNumber=g,b[d.name]=d;else break;g++}return b};a.extractAttributes=
function(a){for(var b,d=0,g={};;){b=GL.getActiveAttrib(a,d);if(b!==null&&b!==-1&&b!==void 0)b.location=GL.getAttribLocation(a,b.name),b.locationNumber=d,g[b.name]=b;else break;d++}a.highestAttributeNumber=d-1;return g};a.createUniforms=function(a,b){var d,g={},h,f,i=0;for(d in a)h=a[d],f=h.name,b[f]===void 0?console.warn("GLOW.Compiler.createUniforms: missing declaration for uniform "+f):b[f]instanceof GLOW.Uniform?g[f]=b[f]:(g[f]=new GLOW.Uniform(h,b[f]),g[f].type===GL.SAMPLER_2D&&g[f].data.init(i++));
return g};a.createAttributes=function(a,b){var d,g,h,f={};for(d in a)g=a[d],h=g.name,b[h]===void 0?console.warning("GLOW.Compiler.createAttributes: missing declaration for attribute "+h):f[h]=b[h]instanceof GLOW.Attribute?b[h]:new GLOW.Attribute(g,b[h]);return f};a.createElements=function(a){if(a)return a instanceof GLOW.Elements||(a instanceof Uint16Array||(a=new Uint16Array(a)),a=new GLOW.Elements(a)),a;else console.error("GLOW.Compiler.createElements: missing 'elements' in supplied data. Quitting.")};
return a}();GLOW.CompiledData=function(a,b,c,e){this.program=a;this.uniforms=b!==void 0?b:{};this.attributes=c!==void 0?c:{};this.elements=e};
GLOW.CompiledData.prototype.clone=function(a){var b=new GLOW.CompiledData,c;for(c in this.uniforms)b.uniforms[c]=a[c]?new GLOW.Uniform(this.uniforms[c],a[c]):this.uniforms[c];for(var e in this.attributes)b.attributes[e]=a[e]?new GLOW.Attribute(this.attributes[e],a[e]):this.attributes[e];b.elements=a.elements?new GLOW.Elements(a.elements):this.elements;b.program=this.program;return b};
GLOW.Cache=function(){this.highestAttributeNumber=-1;this.uniformByLocation=[];this.attributeByLocation=[];this.textureByLocation=[];this.programId=this.elementId=-1};GLOW.Cache.prototype.programCached=function(a){if(a.id===this.programId)return!0;this.programId=a.id;return!1};GLOW.Cache.prototype.setProgramHighestAttributeNumber=function(a){var b=this.highestAttributeNumber;this.highestAttributeNumber=a.highestAttributeNumber;return a.highestAttributeNumber-b};
GLOW.Cache.prototype.uniformCached=function(a){if(this.uniformByLocation[a.locationNumber]===a.id)return!0;this.uniformByLocation[a.locationNumber]=a.id;return!1};GLOW.Cache.prototype.attributeCached=function(a){if(this.attributeByLocation[a.locationNumber]===a.id)return!0;this.attributeByLocation[a.locationNumber]=a.id;return!1};GLOW.Cache.prototype.textureCached=function(a){if(this.textureByLocation[a.textureUnit]===a.id)return!0;this.textureByLocation[a.textureUnit]=a.id;return!1};
GLOW.Cache.prototype.elementsCached=function(a){if(a.id===this.elementId)return!0;this.elementId=a.id;return!1};GLOW.Cache.prototype.clear=function(){this.highestAttributeNumber=-1;this.uniformByLocation.length=0;this.attributeByLocation.length=0;this.textureByLocation.length=0;this.programId=this.elementId=-1};
GLOW.FBO=function(a,b,c){this.id=GLOW.uniqueId();this.width=a!==void 0?a:window.innerWidth;this.height=b!==void 0?b:window.innerHeight;var c=c!==void 0?c:{},a=c.wrapS!==void 0?c.wrapS:GL.CLAMP_TO_EDGE,b=c.wrapT!==void 0?c.wrapT:GL.CLAMP_TO_EDGE,e=c.magFilter!==void 0?c.magFilter:GL.LINEAR,d=c.minFilter!==void 0?c.minFilter:GL.LINEAR,g=c.format!==void 0?c.format:GL.RGBA,h=c.depth!==void 0?c.depth:!0,c=c.stencil!==void 0?paramaters.stencil:!1;this.frameBuffer=GL.createFramebuffer();this.renderBuffer=
GL.createRenderbuffer();this.texture=GL.createTexture();this.textureUnit=-1;this.viewport={x:0,y:0,width:this.width,height:this.height};try{GL.bindTexture(GL.TEXTURE_2D,this.texture),GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_WRAP_S,a),GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_WRAP_T,b),GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_MAG_FILTER,e),GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_MIN_FILTER,d),GL.texImage2D(GL.TEXTURE_2D,0,g,this.width,this.height,0,g,GL.UNSIGNED_BYTE,null),GL.bindRenderbuffer(GL.RENDERBUFFER,
this.renderBuffer),GL.bindFramebuffer(GL.FRAMEBUFFER,this.frameBuffer),GL.framebufferTexture2D(GL.FRAMEBUFFER,GL.COLOR_ATTACHMENT0,GL.TEXTURE_2D,this.texture,0),h&&!c?(GL.renderbufferStorage(GL.RENDERBUFFER,GL.DEPTH_COMPONENT16,this.width,this.height),GL.framebufferRenderbuffer(GL.FRAMEBUFFER,GL.DEPTH_ATTACHMENT,GL.RENDERBUFFER,this.renderBuffer)):h&&c?(GL.renderbufferStorage(GL.RENDERBUFFER,GL.DEPTH_STENCIL,this.width,this.height),GL.framebufferRenderbuffer(GL.FRAMEBUFFER,GL.DEPTH_STENCIL_ATTACHMENT,
GL.RENDERBUFFER,this.renderBuffer)):GL.renderbufferStorage(GL.RENDERBUFFER,GL.RGBA4,this.width,this.height),GL.bindTexture(GL.TEXTURE_2D,null),GL.bindRenderbuffer(GL.RENDERBUFFER,null),GL.bindFramebuffer(GL.FRAMEBUFFER,null)}catch(f){console.error("GLOW.FBO.construct: "+f)}};GLOW.FBO.prototype.init=function(a){this.textureUnit=a};
GLOW.FBO.prototype.bind=function(){GL.bindFramebuffer(GL.FRAMEBUFFER,this.frameBuffer);GL.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height);return this};GLOW.FBO.prototype.unbind=function(){GL.bindFramebuffer(GL.FRAMEBUFFER,null);GL.viewport(0,0,GLOW.currentContext.width,GLOW.currentContext.height);return this};
GLOW.FBO.prototype.setupViewport=function(a){this.viewport.x=a.x!==void 0?a.x:0;this.viewport.y=a.y!==void 0?a.y:0;this.viewport.width=a.width!==void 0?a.width:window.innerWidth;this.viewport.height=a.height!==void 0?a.height:window.innerHeight;return this};GLOW.FBO.prototype.resize=function(){return this};GLOW.FBO.prototype.generateMipMaps=function(){GL.bindTexture(GL.TEXTURE_2D,this.texture);GL.generateMipmap(GL.TEXTURE_2D);GL.bindTexture(GL.TEXTURE_2D,null);return this};
GLOW.Texture=function(a){this.url=a;this.id=GLOW.uniqueId();this.image=new Image;this.textureUnit=-1;this.texture=void 0};GLOW.Texture.prototype.init=function(a){this.textureUnit=a;this.image.onload=this.onLoad;this.image.src=this.url};
GLOW.Texture.prototype.onLoad=function(){this.texture=GL.createTexture();GL.bindTexture(GL.TEXTURE_2D,this.texture);GL.texImage2D(GL.TEXTURE_2D,0,GL.RGBA,GL.RGBA,GL.UNSIGNED_BYTE,this.image);GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_WRAP_S,GL.REPEAT);GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_WRAP_T,GL.REPEAT);GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_MAG_FILTER,GL.LINEAR);GL.texParameteri(GL.TEXTURE_2D,GL.TEXTURE_MIN_FILTER,GL.LINEAR_MIPMAP_LINEAR);GL.generateMipmap(GL.TEXTURE_2D)};
GLOW.Shader=function(a){this.id=GLOW.uniqueId();this.compiledData=a.use?a.use.clone(a.except):GLOW.Compiler.compile(a.vertexShader,a.fragmentShader,a.data);this.attachData()};
GLOW.Shader.prototype.attachData=function(){var a,b;for(a in this.compiledData.uniforms)this[a]===void 0?this[a]=this.compiledData.uniforms[a].data:console.warn("GLOW.Shader.attachUniformAndAttributeData: name collision on uniform "+a+", not attaching for easy access. Please use Shader.uniforms."+a+".data to access data.");for(b in this.compiledData.attributes)this[b]===void 0?this[b]=this.compiledData.attributes[b].data:console.warn("GLOW.Shader.attachUniformAndAttributeData: name collision on attribute "+
b+", not attaching for easy access. Please use Shader.attributes."+b+".data to access data.")};
GLOW.Shader.prototype.draw=function(){var a=this.compiledData;if(!GLOW.currentContext.cache.programCached(a.program)){var b=GLOW.currentContext.cache.setProgramHighestAttributeNumber(a.program);if(b){var c=a.program.highestAttributeNumber,e=c-b+1;if(b>0)for(;e<=c;e++)GL.enableVertexAttribArray(e);else for(;e>=c;e--)GL.disableVertexAttribArray(e)}GL.useProgram(a.program)}for(var d in a.uniforms)a.uniforms[d].set();for(var g in a.attributes)a.attributes[g].bind();a.elements.draw()};
GLOW.Shader.prototype.clone=function(a){return new GLOW.Shader({use:this.compiledData,except:a})};GLOW.Shader.prototype.dispose=function(){};GLOW.Elements=function(a){this.id=GLOW.uniqueId();this.elements=GL.createBuffer();this.length=a.length;GL.bindBuffer(GL.ELEMENT_ARRAY_BUFFER,this.elements);GL.bufferData(GL.ELEMENT_ARRAY_BUFFER,a,GL.STATIC_DRAW)};
GLOW.Elements.prototype.draw=function(){GLOW.currentContext.cache.elementsCached(this)||GL.bindBuffer(GL.ELEMENT_ARRAY_BUFFER,this.elements);GL.drawElements(GL.TRIANGLES,this.length,GL.UNSIGNED_SHORT,0)};
GLOW.Uniform=function(a,b){this.id=GLOW.uniqueId();this.name=a.name;this.length=a.length;this.type=a.type;this.location=a.location;this.locationNumber=a.locationNumber;this.data=b;var c;c=this.length&&this.length>1?"_A":"";switch(this.type){case GL.INT:this.uniformFunction=GLOW.UniformFunctions["INT"+c];break;case GL.INT_VEC2:this.uniformFunction=GLOW.UniformFunctions["INT_VEC2"+c];break;case GL.INT_VEC3:this.uniformFunction=GLOW.UniformFunctions["INT_VEC3"+c];break;case GL.INT_VEC4:this.uniformFunction=
GLOW.UniformFunctions["INT_VEC4"+c];break;case GL.FLOAT:this.uniformFunction=GLOW.UniformFunctions["FLOAT"+c];break;case GL.FLOAT_VEC2:this.uniformFunction=GLOW.UniformFunctions["FLOAT_VEC2"+c];break;case GL.FLOAT_VEC3:this.uniformFunction=GLOW.UniformFunctions["FLOAT_VEC3"+c];break;case GL.FLOAT_VEC4:this.uniformFunction=GLOW.UniformFunctions["FLOAT_VEC4"+c];break;case GL.FLOAT_MAT2:this.uniformFunction=GLOW.UniformFunctions.FLOAT_MAT2;break;case GL.FLOAT_MAT3:this.uniformFunction=GLOW.UniformFunctions.FLOAT_MAT3;
break;case GL.FLOAT_MAT4:this.uniformFunction=GLOW.UniformFunctions.FLOAT_MAT4;break;case GL.SAMPLER_2D:this.uniformFunction=GLOW.UniformFunctions["SAMPLER_2D"+c];break;case GL.SAMPLER_CUBE:this.uniformFunction=GLOW.UniformFunctions["SAMPLER_CUBE"+c]}};GLOW.Uniform.prototype.set=function(){GLOW.currentContext.cache.uniformCached(this)||this.uniformFunction(this.location,this.data)};
GLOW.UniformFunctions={INT:function(a,b){GL.uniform1i(a,b.value)},INT_A:function(a,b){GL.uniform1iv(a,b.value)},INT_VEC2:function(a,b){GL.uniform2i(a,b.value[0],b.value[1])},INT_VEC2_A:function(a,b){GL.uniform2iv(a,b.value)},INT_VEC3:function(a,b){GL.uniform3i(a,b.value[0],b.value[1],b.value[2])},INT_VEC3_A:function(a,b){GL.uniform3iv(a,b.value)},INT_VEC4:function(a,b){GL.uniform4i(a,b.value[0],b.value[1],b.value[2],b.value[3])},INT_VEC4_A:function(a,b){GL.uniform4iv(a,b)},FLOAT:function(a,b){GL.uniform1f(a,
b.value)},FLOAT_A:function(a,b){GL.uniform1fv(a,b.value)},FLOAT_VEC2:function(a,b){GL.uniform2f(a,b.value[0],b.value[1])},FLOAT_VEC2_A:function(a,b){GL.uniform2fv(a,b.value)},FLOAT_VEC3:function(a,b){GL.uniform3f(a,b.value[0],b.value[1],b.value[2])},FLOAT_VEC3_A:function(a,b){GL.uniform3fv(a,b.value)},FLOAT_VEC4:function(a,b){GL.uniform4f(a,b.value[0],b.value[1],b.value[2],b.value[3])},FLOAT_VEC4_A:function(a,b){GL.uniform4fv(a,b.value)},FLOAT_MAT2:function(a,b){GL.uniformMatrix2fv(a,b.transposeUniform,
b.value)},FLOAT_MAT3:function(a,b){GL.uniformMatrix3fv(a,b.transposeUniform,b.value)},FLOAT_MAT4:function(a,b){GL.uniformMatrix4fv(a,b.transposeUniform,b.value)},SAMPLER_2D:function(a,b){b.texture!==void 0&&b.textureUnit!==-1&&!GLOW.currentContext.cache.textureCached(b)&&(GL.uniform1i(a,b.textureUnit),GL.activeTexture(GL.TEXTURE0+b.textureUnit),GL.bindTexture(GL.TEXTURE_2D,b.texture))},SAMPLER_CUBE:function(){}};
GLOW.Attribute=function(a,b,c){this.id=GLOW.uniqueId();this.name=a.name;this.type=a.type;this.location=a.location;this.locationNumber=a.locationNumber;this.offset=this.stride=0;this.size=GLOW.AttributeSize(a.type);this.data=b;this.buffer=GL.createBuffer();if(!c)if(this.data instanceof Float32Array)this.setData(this.data);else{for(var c=this.data.length,e,d=this.size,g=new Float32Array(c*d),b=this.data,h=0,a=0;a<c;a++)for(e=0;e<d;e++)g[h++]=b[a].value[e];this.setData(g)}};
GLOW.Attribute.prototype.interleave=function(a,b,c){this.stride=b;this.offset=c};GLOW.Attribute.prototype.setData=function(a){this.data=a;GL.bindBuffer(GL.ARRAY_BUFFER,this.buffer);GL.bufferData(GL.ARRAY_BUFFER,this.data,GL.STATIC_DRAW)};GLOW.Attribute.prototype.bind=function(){GLOW.currentContext.cache.attributeCached(this)||(GL.bindBuffer(GL.ARRAY_BUFFER,this.buffer),GL.vertexAttribPointer(this.location,this.size,GL.FLOAT,!1,this.stride,this.offset))};
GLOW.AttributeSize=function(a){switch(a){case GL.INT:return 1;case GL.INT_VEC2:return 2;case GL.INT_VEC3:return 3;case GL.INT_VEC4:return 4;case GL.FLOAT:return 1;case GL.FLOAT_VEC2:return 2;case GL.FLOAT_VEC3:return 3;case GL.FLOAT_VEC4:return 4;case GL.FLOAT_MAT2:return 4;case GL.FLOAT_MAT3:return 9;case GL.FLOAT_MAT4:return 16}return 0};GLOW.Float=function(a){this.value=a!==void 0?a:0};GLOW.Int=function(a){this.value=a!==void 0?a:0};
GLOW.Vector3=function(a,b,c){this.value=new Float32Array(3);this.value[0]=a!==void 0?a:0;this.value[1]=b!==void 0?b:0;this.value[2]=c!==void 0?c:0};GLOW.Vector3.prototype.set=function(a,b,c){this.value[0]=a;this.value[1]=b;this.value[2]=c;return this};GLOW.Vector3.prototype.copy=function(){this.set(this.value[0],this.value[1],this.value[2]);return this};GLOW.Vector3.prototype.add=function(a,b){a=a.value;b=b.value;this.value[0]=a[0]+b[0];this.value[1]=a[1]+b[1];this.value[2]=a[2]+b[2];return this};
GLOW.Vector3.prototype.addSelf=function(a){a=a.value;this.value[0]+=a[0];this.value[1]+=a[1];this.value[2]+=a[2];return this};GLOW.Vector3.prototype.addScalar=function(a){this.value[0]+=a;this.value[1]+=a;this.value[2]+=a;return this};GLOW.Vector3.prototype.sub=function(a,b){a=a.value;b=b.value;this.value[0]=a[0]-b[0];this.value[1]=a[1]-b[1];this.value[2]=a[2]-b[2];return this};GLOW.Vector3.prototype.subSelf=function(a){a=a.value;this.value[0]-=a[0];this.value[1]-=a[1];this.value[2]-=a[2];return this};
GLOW.Vector3.prototype.cross=function(a,b){a=a.value;b=b.value;this.value[0]=a[1]*b[2]-a[2]*b[1];this.value[1]=a[2]*b[0]-a[0]*b[2];this.value[2]=a[0]*b[1]-a[1]*b[0];return this};GLOW.Vector3.prototype.crossSelf=function(a){var a=a.value,b=a[0],c=a[1],a=a[2],e=this.value[0],d=this.value[1],g=this.value[2];this.value[0]=c*g-a*d;this.value[1]=a*e-b*g;this.value[2]=b*d-c*e;return this};
GLOW.Vector3.prototype.multiply=function(a,b){a=a.value;b=b.value;this.value[0]=a[0]*b[0];this.value[1]=a[1]*b[1];this.value[2]=a[2]*b[2];return this};GLOW.Vector3.prototype.multiplySelf=function(a){a=a.value;this.value[0]*=a[0];this.value[1]*=a[1];this.value[2]*=a[2];return this};GLOW.Vector3.prototype.multiplyScalar=function(a){this.value[0]*=a;this.value[1]*=a;this.value[2]*=a;return this};
GLOW.Vector3.prototype.divideSelf=function(a){a=a.value;this.value[0]/=a[0];this.value[1]/=a[1];this.value[2]/=a[2];return this};GLOW.Vector3.prototype.divideScalar=function(a){this.value[0]/=a;this.value[1]/=a;this.value[2]/=a;return this};GLOW.Vector3.prototype.negate=function(){this.value[0]=-this.value[0];this.value[1]=-this.value[1];this.value[2]=-this.value[2];return this};GLOW.Vector3.prototype.dot=function(a){a=a.value;return this.value[0]*a[0]+this.value[1]*a[1]+this.value[2]*a[2]};
GLOW.Vector3.prototype.distanceTo=function(a){return Math.sqrt(this.distanceToSquared(a))};GLOW.Vector3.prototype.distanceToSquared=function(a){var a=a.value,b=this.value[0]-a[0],c=this.value[1]-a[1],a=this.value[2]-a[2];return b*b+c*c+a*a};GLOW.Vector3.prototype.length=function(){return Math.sqrt(this.lengthSq())};GLOW.Vector3.prototype.lengthSq=function(){return this.value[0]*this.value[0]+this.value[1]*this.value[1]+this.value[2]*this.value[2]};
GLOW.Vector3.prototype.lengthManhattan=function(){return this.value[0]+this.value[1]+this.value[2]};GLOW.Vector3.prototype.normalize=function(){var a=Math.sqrt(this.value[0]*this.value[0]+this.value[1]*this.value[1]+this.value[2]*this.value[2]);a>0?this.multiplyScalar(1/a):this.set(0,0,0);return this};GLOW.Vector3.prototype.setPositionFromMatrix=function(a){a=a.value;this.value[0]=a[12];this.value[1]=a[13];this.value[2]=a[14]};GLOW.Vector3.prototype.setLength=function(a){return this.normalize().multiplyScalar(a)};
GLOW.Vector3.prototype.isZero=function(){return Math.abs(this.value[0])<1.0E-4&&Math.abs(this.value[1])<1.0E-4&&Math.abs(this.value[2])<1.0E-4};GLOW.Vector3.prototype.clone=function(){return GLOW.Vector3(this.value[0],this.value[1],this.value[2])};GLOW.Matrix3=function(){this.value=new Float32Array(9);this.transposeUniform=!1};
GLOW.Matrix3.prototype.set=function(a,b,c,e,d,g,h,f,i){this.value[0]=a;this.value[4]=b;this.value[8]=c;this.value[1]=e;this.value[5]=d;this.value[9]=g;this.value[2]=h;this.value[6]=f;this.value[10]=i;return this};GLOW.Matrix3.prototype.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this};
GLOW.Matrix4=function(){this.value=new Float32Array(16);this.transposeUniform=!1;this.position=new GLOW.Vector3;this.columnX=new GLOW.Vector3;this.columnY=new GLOW.Vector3;this.columnZ=new GLOW.Vector3;this.rotation=new GLOW.Vector3;this.identity()};
GLOW.Matrix4.prototype.set=function(a,b,c,e,d,g,h,f,i,l,k,j,n,q,o,p){this.value[0]=a;this.value[4]=b;this.value[8]=c;this.value[12]=e;this.value[1]=d;this.value[5]=g;this.value[9]=h;this.value[13]=f;this.value[2]=i;this.value[6]=l;this.value[10]=k;this.value[14]=j;this.value[3]=n;this.value[7]=q;this.value[11]=o;this.value[15]=p;return this};GLOW.Matrix4.prototype.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this};
GLOW.Matrix4.prototype.copy=function(a){a=a.value;this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]);return this};
GLOW.Matrix4.prototype.lookAt=function(a,b){var c=GLOW.Matrix4.tempVector3A,e=GLOW.Matrix4.tempVector3B,d=GLOW.Matrix4.tempVector3C,g=this.getPosition();g.value[0]=this.value[12];g.value[1]=this.value[13];g.value[2]=this.value[14];d.sub(g,a).normalize();d.length()===0&&(d.value[3]=1);c.cross(b,d).normalize();c.length()===0&&(d.value[0]+=1.0E-4,c.cross(b,d).normalize());e.cross(d,c).normalize();c=c.value;e=e.value;d=d.value;this.value[0]=c[0];this.value[4]=e[0];this.value[8]=d[0];this.value[1]=c[1];
this.value[5]=e[1];this.value[9]=d[1];this.value[2]=c[2];this.value[6]=e[2];this.value[10]=d[2];return this};
GLOW.Matrix4.prototype.multiplyVector3=function(a){var b=a.value[0],c=a.value[1],e=a.value[2],d=1/(this.value[3]*b+this.value[7]*c+this.value[11]*e+this.value[15]);a.value[0]=(this.value[0]*b+this.value[4]*c+this.value[8]*e+this.value[12])*d;a.value[1]=(this.value[1]*b+this.value[5]*c+this.value[9]*e+this.value[13])*d;a.value[2]=(this.value[2]*b+this.value[6]*c+this.value[10]*e+this.value[14])*d;return a};
GLOW.Matrix4.prototype.multiplyVector4=function(a){var b=a.value[0],c=a.value[1],e=a.value[2],d=a.value[3];a.value[0]=this.value[0]*b+this.value[4]*c+this.value[8]*e+this.value[12]*d;a.value[1]=this.value[1]*b+this.value[5]*c+this.value[9]*e+this.value[13]*d;a.value[2]=this.value[2]*b+this.value[6]*c+this.value[10]*e+this.value[14]*d;a.value[3]=this.value[3]*b+this.value[7]*c+this.value[11]*e+this.value[15]*d;return a};
GLOW.Matrix4.prototype.rotateAxis=function(a){var b=a.value[0],c=a.value[1],e=a.value[2];a.value[0]=b*this.value[0]+c*this.value[4]+e*this.value[8];a.value[1]=b*this.value[1]+c*this.value[5]+e*this.value[9];a.value[2]=b*this.value[2]+c*this.value[6]+e*this.value[10];a.normalize();return a};
GLOW.Matrix4.prototype.crossVector=function(a){var b=GLOW.Vector4(),c=a.value[0],e=a.value[1],d=a.value[2],a=a.value[3];b.value[0]=this.value[0]*c+this.value[4]*e+this.value[8]*d+this.value[12]*a;b.value[1]=this.value[1]*c+this.value[5]*e+this.value[9]*d+this.value[13]*a;b.value[2]=this.value[2]*c+this.value[6]*e+this.value[10]*d+this.value[14]*a;b.value[3]=a?this.value[3]*c+this.value[7]*e+this.value[11]*d+this.value[15]*a:1;return b};
GLOW.Matrix4.prototype.multiply=function(a,b){var a=a.value,b=b.value,c=a[0],e=a[4],d=a[8],g=a[12],h=a[1],f=a[5],i=a[9],l=a[13],k=a[2],j=a[6],n=a[10],q=a[14],o=a[3],p=a[7],r=a[11],t=a[15],s=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14];this.value[0]=c*s+e*x+d*B;this.value[4]=c*u+e*y+d*C;this.value[8]=c*v+e*z+d*D;this.value[12]=c*w+e*A+d*E+g;this.value[1]=h*s+f*x+i*B;this.value[5]=h*u+f*y+i*C;this.value[9]=h*v+f*z+i*D;this.value[13]=h*w+f*A+i*E+l;this.value[2]=
k*s+j*x+n*B;this.value[6]=k*u+j*y+n*C;this.value[10]=k*v+j*z+n*D;this.value[14]=k*w+j*A+n*E+q;this.value[3]=o*s+p*x+r*B;this.value[7]=o*u+p*y+r*C;this.value[11]=o*v+p*z+r*D;this.value[15]=o*w+p*A+r*E+t;return this};GLOW.Matrix4.prototype.multiplySelf=function(a){this.multiply(m,a);return this};
GLOW.Matrix4.prototype.multiplyScalar=function(a){this.value[0]*=a;this.value[4]*=a;this.value[8]*=a;this.value[12]*=a;this.value[1]*=a;this.value[5]*=a;this.value[9]*=a;this.value[13]*=a;this.value[2]*=a;this.value[6]*=a;this.value[10]*=a;this.value[14]*=a;this.value[3]*=a;this.value[7]*=a;this.value[11]*=a;this.value[15]*=a;return this};
GLOW.Matrix4.prototype.determinant=function(){var a=this.value[0],b=this.value[4],c=this.value[8],e=this.value[12],d=this.value[1],g=this.value[5],h=this.value[9],f=this.value[13],i=this.value[2],l=this.value[6],k=this.value[10],j=this.value[14],n=this.value[3],q=this.value[7],o=this.value[11],p=this.value[15];return e*h*l*n-c*f*l*n-e*g*k*n+b*f*k*n+c*g*j*n-b*h*j*n-e*h*i*q+c*f*i*q+e*d*k*q-a*f*k*q-c*d*j*q+a*h*j*q+e*g*i*o-b*f*i*o-e*d*l*o+a*f*l*o+b*d*j*o-a*g*j*o-c*g*i*p+b*h*i*p+c*d*l*p-a*h*l*p-b*d*k*
p+a*g*k*p};GLOW.Matrix4.prototype.transpose=function(){var a;a=this.value[1];this.value[1]=this.value[4];this.value[4]=a;a=this.value[2];this.value[2]=this.value[8];this.value[8]=a;a=this.value[6];this.value[6]=this.value[9];this.value[9]=a;a=this.value[3];this.value[3]=this.value[12];this.value[12]=a;a=this.value[7];this.value[7]=this.value[13];this.value[13]=a;a=this.value[11];this.value[11]=this.value[14];this.value[11]=a;return this};
GLOW.Matrix4.prototype.clone=function(){var a=new GLOW.Matrix4;a.value=new Float32Array(m);return a};GLOW.Matrix4.prototype.setPosition=function(a,b,c){this.value[12]=a;this.value[13]=b;this.value[14]=c;return this};GLOW.Matrix4.prototype.addPosition=function(a,b,c){this.value[12]+=a;this.value[13]+=b;this.value[14]+=c};
GLOW.Matrix4.prototype.setRotation=function(a,b,c){this.rotation.set(a,b,c);var e=Math.cos(a),a=Math.sin(a),d=Math.cos(b),b=Math.sin(b),g=Math.cos(c),c=Math.sin(c),h=e*b,f=a*b;this.value[0]=d*g;this.value[4]=-d*c;this.value[8]=b;this.value[1]=f*g+e*c;this.value[5]=-f*c+e*g;this.value[9]=-a*d;this.value[2]=-h*g+a*c;this.value[6]=h*c+a*g;this.value[10]=e*d;return this};
GLOW.Matrix4.prototype.addRotation=function(a,b,c){this.rotation.value[0]+=a;this.rotation.value[1]+=b;this.rotation.value[2]+=c;this.setRotation(rotation.value[0],rotation.value[1],rotation.value[2])};GLOW.Matrix4.prototype.getPosition=function(){this.position.set(this.value[12],this.value[13],this.value[14]);return this.position};GLOW.Matrix4.prototype.getColumnX=function(){this.columnX.set(this.value[0],this.value[1],this.value[2]);return this.columnX};
GLOW.Matrix4.prototype.getColumnY=function(){this.columnY.set(this.value[4],this.value[5],this.value[6]);return this.columnY};GLOW.Matrix4.prototype.getColumnZ=function(){this.columnZ.set(this.value[8],this.value[9],this.value[10]);return this.columnZ};
GLOW.Matrix4.prototype.scale=function(a,b,c){var e;b!==void 0&&c!==void 0?e=a:(e=a.value[0],b=a.value[1],c=a.value[2]);this.value[0]*=e;this.value[4]*=b;this.value[8]*=c;this.value[1]*=e;this.value[5]*=b;this.value[9]*=c;this.value[2]*=e;this.value[6]*=b;this.value[10]*=c;this.value[3]*=e;this.value[7]*=b;this.value[11]*=c;return this};
GLOW.Matrix4.makeInverse=function(a,b){b===void 0&&(b=new GLOW.Matrix4);var c=a.value,e=b.value,d=c[0],g=c[4],h=c[8],f=c[12],i=c[1],l=c[5],k=c[9],j=c[13],n=c[2],q=c[6],o=c[10],p=c[14],r=c[3],t=c[7],s=c[11],c=c[15];e[0]=k*p*t-j*o*t+j*q*s-l*p*s-k*q*c+l*o*c;e[1]=j*o*r-k*p*r-j*n*s+i*p*s+k*n*c-i*o*c;e[2]=l*p*r-j*q*r+j*n*t-i*p*t-l*n*c+i*q*c;e[3]=k*q*r-l*o*r-k*n*t+i*o*t+l*n*s-i*q*s;e[4]=f*o*t-h*p*t-f*q*s+g*p*s+h*q*c-g*o*c;e[5]=h*p*r-f*o*r+f*n*s-d*p*s-h*n*c+d*o*c;e[6]=f*q*r-g*p*r-f*n*t+d*p*t+g*n*c-d*q*c;
e[7]=g*o*r-h*q*r+h*n*t-d*o*t-g*n*s+d*q*s;e[8]=h*j*t-f*k*t+f*l*s-g*j*s-h*l*c+g*k*c;e[9]=f*k*r-h*j*r-f*i*s+d*j*s+h*i*c-d*k*c;e[10]=h*j*r-f*l*r+f*i*t-d*j*t-g*i*c+d*l*c;e[11]=h*l*r-g*k*r-h*i*t+d*k*t+g*i*s-d*l*s;e[12]=f*k*q-h*j*q-f*l*o+g*j*o+h*l*p-g*k*p;e[13]=h*j*n-f*k*n+f*i*o-d*j*o-h*i*p+d*k*p;e[14]=f*l*n-g*j*n-f*i*q+d*j*q+g*i*p-d*l*p;e[15]=g*k*n-h*l*n+h*i*q-d*k*q-g*i*o+d*l*o;b.multiplyScalar(1/a.determinant());return b};
GLOW.Matrix4.makeFrustum=function(a,b,c,e,d,g){var h,f;h=new GLOW.Matrix4;f=h.value;f[0]=2*d/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*d/(e-c);f[9]=(e+c)/(e-c);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+d)/(g-d);f[14]=-2*g*d/(g-d);f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return h};GLOW.Matrix4.makeProjection=function(a,b,c,e){var d,a=c*Math.tan(a*Math.PI/360);d=-a;return GLOW.Matrix4.makeFrustum(d*b,a*b,d,a,c,e)};
GLOW.Matrix4.makeOrtho=function(a,b,c,e,d,g){var h,f,i,l,k;h=GLOW.Matrix4();i=b-a;l=c-e;k=g-d;f=h.value;f[0]=2/i;f[4]=0;f[8]=0;f[12]=-((b+a)/i);f[1]=0;f[5]=2/l;f[9]=0;f[13]=-((c+e)/l);f[2]=0;f[6]=0;f[10]=-2/k;f[14]=-((g+d)/k);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return h};GLOW.Matrix4.tempVector3A=new GLOW.Vector3;GLOW.Matrix4.tempVector3B=new GLOW.Vector3;GLOW.Matrix4.tempVector3C=new GLOW.Vector3;GLOW.Matrix4.tempVector3D=new GLOW.Vector3;
GLOW.Geometry={randomVector3Array:function(a,b){var b=b!==void 0?b:1,c,e=[],d=b*2;for(c=0;c<a;c++)e.push(GLOW.Vector3(Math.random()*d-b,Math.random()*d-b,Math.random()*d-b));return e},elements:function(a){var b=0,c,e=new Uint16Array(a*3);for(c=0;c<a;c++)e[b]=b++,e[b]=b++,e[b]=b++;return e},faceNormals:function(a,b){var c=new Float32Array(a.length),e,d=b.length,g,h,f,i=new GLOW.Vector3,l=new GLOW.Vector3,k=new GLOW.Vector3,j=new GLOW.Vector3;for(e=0;e<d;)g=b[e++]*3,h=b[e++]*3,f=b[e++]*3,i.set(a[g+
0],a[g+1],a[g+2]),l.set(a[h+0],a[h+1],a[h+2]),k.set(a[f+0],a[f+1],a[f+2]),l.subSelf(i),k.subSelf(i),j.cross(k,l).normalize(),c[g+0]=j.value[0],c[g+1]=j.value[1],c[g+2]=j.value[2],c[h+0]=j.value[0],c[h+1]=j.value[1],c[h+2]=j.value[2],c[f+0]=j.value[0],c[f+1]=j.value[1],c[f+2]=j.value[2];return c}};
GLOW.Geometry.Cube={vertices:function(a){var b=new Float32Array(72),c=0,a=a!==void 0?a*0.5:5;b[c++]=+a;b[c++]=+a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=+a;
b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=+a;b[c++]=-a;b[c++]=-a;b[c++]=+a;return b},elements:function(){var a=new Uint16Array(36),b=0;a[b++]=0;a[b++]=1;a[b++]=2;a[b++]=0;a[b++]=2;a[b++]=3;a[b++]=4;a[b++]=5;a[b++]=6;a[b++]=4;a[b++]=6;a[b++]=7;a[b++]=8;a[b++]=9;a[b++]=
10;a[b++]=8;a[b++]=10;a[b++]=11;a[b++]=12;a[b++]=13;a[b++]=14;a[b++]=12;a[b++]=14;a[b++]=15;a[b++]=16;a[b++]=17;a[b++]=18;a[b++]=16;a[b++]=18;a[b++]=19;a[b++]=20;a[b++]=21;a[b++]=22;a[b++]=20;a[b++]=22;a[b++]=23;return a},uvs:function(){var a=new Float32Array(48),b=0;a[b++]=0;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=0;
a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;return a}};
GLOW.Geometry.Plane={vertices:function(a){var b=new Float32Array(12),c=0,a=a!==void 0?a*0.5:1;b[c++]=+a;b[c++]=-a;b[c++]=0;b[c++]=+a;b[c++]=+a;b[c++]=0;b[c++]=-a;b[c++]=+a;b[c++]=0;b[c++]=-a;b[c++]=-a;b[c++]=0;return b},elements:function(){var a=new Uint16Array(6),b=0;a[b++]=0;a[b++]=1;a[b++]=2;a[b++]=0;a[b++]=2;a[b++]=3;return a},uvs:function(){var a=new Float32Array(8),b=0;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=1;a[b++]=0;a[b++]=1;a[b++]=0;a[b++]=0;return a}};
GLOW.Node=function(a){this.localMatrix=new GLOW.Matrix4;this.globalMatrix=new GLOW.Matrix4;this.viewMatrix=new GLOW.Matrix4;this.useXYZStyleTransform=!1;this.position={x:0,y:0,z:0};this.rotation={x:0,y:0,z:0};this.scale={x:1,y:1,z:1};this.children=[];this.parent=void 0;if(a)this.shader=a,this.draw=a.draw};
GLOW.Node.prototype.update=function(a,b){this.useXYZStyleTransform&&(this.localMatrix.setPosition(this.position.x,this.position.y,this.position.z),this.localMatrix.setRotation(this.rotation.x,this.rotation.y,this.rotation.z),this.localMatrix.scale(this.scale.x,this.scale.y,this.scale.z));a?this.globalMatrix.multiply(a,this.localMatrix):this.globalMatrix.copy(this.localMatrix);b&&this.viewMatrix.multiply(b,this.globalMatrix);var c,e=this.children.length;for(c=0;c<e;c++)this.children[c].update(this.globalMatrix,
b);return this};GLOW.Node.prototype.addChild=function(a){if(this.children.indexOf(a)===-1)this.children.push(a),a.parent&&a.parent.removeChild(a),a.parent=this;return this};GLOW.Node.prototype.removeChild=function(a){var b=this.children.indexOf(a);if(b!==-1)this.children.splice(1,b),a.parent=void 0;return this};
GLOW.Camera=function(a){GLOW.Node.call(this);var a=a!==void 0?a:{},b=a.fov!==void 0?a.fov:40,c=a.aspect!==void 0?a.aspect:window.innerWidth/window.innerHeight,e=a.near!==void 0?a.near:0.1,d=a.far!==void 0?a.far:1E4;this.useTarget=a.useTarget!==void 0?a.useTarget:!0;this.projection=GLOW.Matrix4.makeProjection(b,c,e,d);this.inverse=new GLOW.Matrix4;this.target=new GLOW.Vector3(0,0,-100);this.up=new GLOW.Vector3(0,1,0);this.update()};GLOW.Camera.prototype=new GLOW.Node;
GLOW.Camera.prototype.constructor=GLOW.Camera;GLOW.Camera.prototype.supr=GLOW.Node.prototype;
GLOW.Camera.prototype.update=function(a,b){this.useXYZStyleTransform?(this.localMatrix.setPosition(this.position.x,this.position.y,this.position.z),this.useTarget?this.localMatrix.lookAt(this.target,this.up):this.localMatrix.setRotation(this.rotation.x,this.rotation.y,this.rotation.z),this.localMatrix.scale(this.scale.x,this.scale.y,this.scale.z)):this.useTarget&&this.localMatrix.lookAt(this.target,this.up);a?this.globalMatrix.multiply(a,this.localMatrix):this.globalMatrix.copy(this.localMatrix);
GLOW.Matrix4.makeInverse(this.globalMatrix,this.inverse);var c,e=this.children.length;for(c=0;c<e;c++)this.children[c].update(this.globalMatrix,b)};GLOW.defaultCamera=new GLOW.Camera;
